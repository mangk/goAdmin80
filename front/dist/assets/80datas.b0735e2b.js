/*! 
 Build based on gin-vue-admin 
 Time : 1717748743000 */
import{a,o as t,d as e,g as r,e as o,w as l,k as u,F as i,x as s,j as n,t as d,m as c,s as h,az as y,aA as p}from"./80index.89ba3368.js";import"./80checkbox-group.4ed993c7.js";import"./80checkbox.4ed993c7.js";import"./80button.4ed993c7.js";import{s as f}from"./80authority.a2fca530.js";import{W as m}from"./80warningBar.e2ffad56.js";import"./80icon.4ed993c7.js";import"./80warningBar.vue_vue_type_style_index_0_scoped_a7c6b110_lang.4ed993c7.js";import"./80_plugin-vue_export-helper.1b428a4d.js";const v={class:"clearfix sticky-button",style:{margin:"18px"}},g={class:"tree-content"},I={name:"Datas"},w=Object.assign(I,{props:{row:{default:function(){return{}},type:Object},authority:{default:function(){return[]},type:Array}},emits:["changeRow"],setup(I,{expose:w,emit:_}){const j=I,x=a([]),b=a(!1),k=a=>{a&&a.forEach((a=>{const t={};t.authorityId=a.authorityId,t.authorityName=a.authorityName,x.value.push(t),a.children&&a.children.length&&k(a.children)}))},A=a([]);k(j.authority),j.row.dataAuthorityId&&j.row.dataAuthorityId.forEach((a=>{const t=x.value&&x.value.filter((t=>t.authorityId===a.authorityId))&&x.value.filter((t=>t.authorityId===a.authorityId))[0];A.value.push(t)}));const C=()=>{A.value=[...x.value],_("changeRow","dataAuthorityId",A.value),b.value=!0},R=()=>{A.value=x.value.filter((a=>a.authorityId===j.row.authorityId)),_("changeRow","dataAuthorityId",A.value),b.value=!0},N=()=>{const a=[];E(j.row,a),A.value=x.value.filter((t=>a.indexOf(t.authorityId)>-1)),_("changeRow","dataAuthorityId",A.value),b.value=!0},E=(a,t)=>{t.push(a.authorityId),a.children&&a.children.forEach((a=>{E(a,t)}))},O=async()=>{0===(await f(j.row)).code&&c({type:"success",message:"资源设置成功"})},V=()=>{_("changeRow","dataAuthorityId",A.value),b.value=!0};return w({enterAndNext:()=>{O()},needConfirm:b}),(a,c)=>{const f=h,I=y,w=p;return t(),e("div",null,[r(m,{title:"此功能仅用于创建角色和角色的many2many关系表，具体使用还须自己结合表实现业务，详情参考示例代码（客户示例）。此功能不建议使用，建议使用插件市场【组织管理功能（点击前往）】来管理资源权限。",href:"https://plugin.gin-vue-admin.com/#/layout/newPluginInfo?id=36"}),o("div",v,[r(f,{class:"fl-right",type:"primary",onClick:O},{default:l((()=>[u("确 定")])),_:1}),r(f,{class:"fl-left",type:"primary",onClick:C},{default:l((()=>[u("全选")])),_:1}),r(f,{class:"fl-left",type:"primary",onClick:R},{default:l((()=>[u("本角色")])),_:1}),r(f,{class:"fl-left",type:"primary",onClick:N},{default:l((()=>[u("本角色及子角色")])),_:1})]),o("div",g,[r(w,{modelValue:A.value,"onUpdate:modelValue":c[0]||(c[0]=a=>A.value=a),onChange:V},{default:l((()=>[(t(!0),e(i,null,s(x.value,((a,e)=>(t(),n(I,{key:e,label:a},{default:l((()=>[u(d(a.authorityName),1)])),_:2},1032,["label"])))),128))])),_:1},8,["modelValue"])])])}}});export{w as default};
